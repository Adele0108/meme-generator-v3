# 🎨 本土化Meme表情包生成器

一个功能强大的中文表情包制作工具，支持图片上传、文字编辑、GIF处理、语音控制等功能。纯前端实现，无需后端服务器。

## ✨ 核心功能特点

### 📸 图片输入（4种方式）
- **本地上传**：点击或拖拽上传图片
- **模板选择**：5个预设模板（熊猫头、狗头、猫头、黄油小熊、奶龙）
- **网络搜索**：使用 Pexels API 搜索网络图片
- **AI生成**：集成通义万相 API，根据描述生成图片

### ✏️ 文案生成（4种方式）
- **直接输入**：文本输入框直接输入文案
- **关键词生成**：输入情绪关键词，自动生成文案建议
- **AI生成**：集成通义千问 API，智能生成文案
- **语音输入**：支持语音转文字输入

### 🎨 文字样式编辑
- **字体设置**：字体大小（10-200px）、字体族（微软雅黑、黑体、宋体等）
- **颜色设置**：文字颜色、描边颜色
- **位置调整**：支持拖拽调整文字位置
- **实时预览**：Canvas 实时渲染效果

### 🖼️ 图片处理
- **图片裁剪**：手动选择裁剪区域，支持鼠标和触摸操作
- **GIF处理**：支持 GIF 图片加载、显示和导出
- **多场景适配**：表情包（1:1）、海报（1080x1440）、公众号首图（900x383）、宣传图（1080x1350）

### 🎤 语音控制（全新功能）
- **全局语音控制**：一键启动，语音控制整个流程
- **语音命令**：支持模板选择、文案操作、样式调整、下载等完整命令
- **智能识别**：自然语言解析，支持多种表达方式
- **实时反馈**：语音识别状态和执行结果实时显示

### 🔧 可视化编辑工作台
- **图层管理**：添加、选择、编辑、删除文字图层
- **属性编辑**：文字内容、样式、位置、大小设置
- **历史版本**：操作历史记录，支持版本回退
- **专业导出**：支持多种格式导出

### 💾 导出下载
- **静态图片**：PNG 格式导出
- **GIF动画**：保持动画效果导出
- **移动端优化**：长按保存功能

## 🚀 快速开始

### 在线使用（推荐）

部署到 GitHub Pages、Netlify 等平台后，可以直接访问网站使用。

查看 [部署说明.md](./部署说明.md) 了解详细部署步骤。

### 本地运行

1. **下载代码**
   ```bash
   git clone <仓库地址>
   cd Meme-generator-v2
   ```

2. **启动本地服务器**

   方式一：使用 VS Code Live Server（推荐）
   - 安装 Live Server 扩展
   - 右键 `meme-generator.html` → Open with Live Server

   方式二：使用 Python
   ```bash
   python -m http.server 8000
   ```
   访问：http://localhost:8000/meme-generator.html

   方式三：使用 Node.js
   ```bash
   npx http-server
   ```

## 📖 使用说明

### 基本流程

1. **上传或选择图片**
   - 点击上传区域选择图片，或拖拽文件到上传区域
   - 或点击模板图片（熊猫头、狗头等）
   - 或搜索网络图片（输入关键词搜索）
   - 或使用 AI 生成（输入描述 + API Key）

2. **添加文案**
   - **方式一**：在"直接输入文案"区域输入文案，点击"应用文案"
   - **方式二**：输入情绪关键词，点击"生成文案"选择建议
   - **方式三**：使用语音输入（点击🎤按钮）
   - **方式四**：使用 AI 生成文案（需填写 API Key）

3. **调整样式**
   - 在"文字样式控制"面板调整字体、大小、颜色、描边
   - 或直接拖拽文字调整位置

4. **下载表情包**
   - 点击"下载表情包"按钮
   - 移动端可长按图片保存

### 🎤 语音控制使用（新功能）

1. **启动全局语音控制**
   - 点击页面顶部的"🎤 启动全局语音控制"按钮
   - 允许浏览器访问麦克风权限

2. **语音命令示例**
   ```
   "选择熊猫头" → 自动选择模板
   "生成文案" → 生成文案建议
   "应用文案" → 应用文案到图片
   "字体大一点" → 调整字体大小
   "改成红色" → 改变文字颜色
   "下载" → 下载表情包
   "关闭语音" → 停止语音控制
   ```

3. **支持的语音命令**
   - 模板选择：选择熊猫头、选择狗头、选择猫头等
   - 文案操作：生成文案、一键生成、应用文案
   - 样式调整：字体大一点、字体小一点、改成红色等
   - 下载操作：下载、保存
   - 工作台：进入工作台、退出工作台

   详细说明请查看 [语音控制完整功能说明.md](./语音控制完整功能说明.md)

### 高级功能

- **裁剪图片**：点击"裁剪图片"按钮，拖拽选择区域，确认裁剪
- **编辑工作台**：点击"进入编辑工作台"进行图层管理和属性编辑
- **AI生成**：使用通义API生成图片和文案（需填写API Key）
- **GIF处理**：支持 GIF 图片的加载、编辑和导出

## 🌐 部署为网站

这个项目是纯前端应用，可以轻松部署到各种静态网站托管服务：

- **GitHub Pages**：免费，适合个人项目
- **Netlify**：免费，自动化部署
- **Vercel**：免费，适合开发
- **腾讯云/阿里云**：需要服务器或对象存储

详细部署步骤请查看 [部署说明.md](./部署说明.md)

部署后可以：
- ✅ 生成二维码供他人扫码访问
- ✅ 随时随地使用，无需安装
- ✅ 多人共享使用

## ⚙️ 配置说明

### API Key 配置

- **通义 API**：在页面中填写 API Key（仅本地使用，不会上传）
  - 用于 AI 图片生成（通义万相）
  - 用于 AI 文案生成（通义千问）
  - 详细配置请查看 [通义API配置说明.txt](./通义API配置说明.txt)

- **图片搜索**：需要配置 Pexels API Key（可选）
  - 用于网络图片搜索功能
  - 详细配置请查看 [图片搜索API配置说明.txt](./图片搜索API配置说明.txt)

### 浏览器要求

- **推荐浏览器**：Chrome、Edge、Safari（iOS 14.5+）
- **语音功能**：需要支持 Web Speech API 的浏览器
- **GIF处理**：需要支持 Canvas 和 WebAssembly 的浏览器

## 📝 注意事项

1. **浏览器兼容性**：建议使用 Chrome、Edge、Safari 等现代浏览器
2. **文件协议限制**：不能直接双击打开 HTML 文件，需要使用 HTTP 服务器运行
3. **API Key 安全**：部署公开网站时，提醒用户使用自己的 API Key
4. **语音功能**：首次使用需要允许浏览器访问麦克风权限
5. **网络要求**：语音识别和图片搜索需要稳定的网络连接
6. **CORS问题**：使用通义API时，如遇CORS错误，需要配置后端代理

## 🛠️ 技术栈

- **前端框架**：纯原生 JavaScript（无框架依赖）
- **UI渲染**：HTML5 Canvas
- **语音识别**：Web Speech API
- **GIF处理**：gif.js + gifuct-js
- **API集成**：通义千问/万相 API、Pexels API
- **样式**：CSS3（响应式设计，支持移动端）

## 🏗️ 项目架构

项目采用模块化设计，包含 **7大核心模块**：

1. **📸 图片输入模块** - 上传、模板、搜索、AI生成
2. **✏️ 文案生成模块** - 直接输入、关键词生成、AI生成、语音输入
3. **🎨 文字样式编辑模块** - 字体、颜色、位置调整
4. **🖼️ 图片处理模块** - 裁剪、GIF处理、多场景适配
5. **🎤 语音控制模块** - 全局语音控制、语音命令系统
6. **🔧 可视化编辑工作台模块** - 图层管理、属性编辑、历史版本
7. **💾 导出下载模块** - 静态图片、GIF导出

详细模块说明请查看 [项目模块说明.md](./项目模块说明.md)

## 📄 文件说明

### 核心文件
- `meme-generator.html` - 主页面结构
- `meme-generator.js` - 核心功能代码（7大模块，3500+行）
- `meme-generator.css` - 样式文件（响应式设计）

### 资源文件
- `images/` - 模板图片文件夹（5个预设模板）

### 文档文件
- `README.md` - 项目说明（本文件）
- `项目模块说明.md` - 详细的模块架构说明
- `语音控制完整功能说明.md` - 语音控制功能详细文档
- `部署说明.md` - 详细部署指南
- `运行说明.txt` - 本地运行说明
- `通义API配置说明.txt` - 通义API配置指南
- `图片搜索API配置说明.txt` - 图片搜索API配置指南

### 配置文件
- `package.json` - 项目依赖配置
- `jest-puppeteer.config.js` - 测试配置

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📜 许可证

MIT License

---

**享受创造表情包的乐趣！** 🎉

